<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Quiz</title>
    <style>
      /* Add your styles here */
    </style>
  </head>
  <body>
    <h1>Create Quiz</h1>
    <div>
      <h2>Add Question</h2>
      <form id="question-form">
        <label for="question">Question:</label>
        <input type="text" id="question" required /><br />

        <label for="right-answer">Right Answer:</label>
        <input type="text" id="right-answer" required /><br />

        <div id="wrong-answers-section">
          <label for="wrong-answer-1">Wrong Answer 1:</label>
          <input type="text" id="wrong-answer-1" /><br />

          <label for="wrong-answer-2">Wrong Answer 2:</label>
          <input type="text" id="wrong-answer-2" /><br />

          <label for="wrong-answer-3">Wrong Answer 3:</label>
          <input type="text" id="wrong-answer-3" /><br />
        </div>

        <label>
          <input
            type="radio"
            name="answer-option"
            id="toggle-wrong-answers"
            checked
          />
          Add Wrong Answers
        </label>

        <label>
          <input type="radio" name="answer-option" id="toggle-option-set" />
          Select Option Set
        </label>

        <div id="option-set-section" style="display: none">
          <label for="option-set">Option Set:</label>
          <select id="option-set">
            <!-- Options will be populated dynamically --></select
          ><br />
        </div>
        <div>
          <label for="explanation">Explanation:</label>
          <textarea id="explanation"></textarea><br />
        </div>
        <button type="submit">Add Question</button>
      </form>
    </div>

    <div>
      <h2>Add Option Set</h2>
      <form id="option-set-form">
        <label for="option-set-name">Option Set Name:</label>
        <input type="text" id="option-set-name" required /><br />

        <label for="options">Options (comma-separated):</label>
        <textarea id="options" required></textarea><br />

        <button type="submit">Add Option Set</button>
      </form>
    </div>

    <h2>Quiz Data</h2>
    <pre id="quiz-data"></pre>

    <h2>Option Sets</h2>
    <pre id="option-sets"></pre>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let quizData = [];
        let optionSets = {};

        const questionForm = document.getElementById("question-form");
        const optionSetForm = document.getElementById("option-set-form");
        const optionSetSelect = document.getElementById("option-set");
        const quizDataPre = document.getElementById("quiz-data");
        const optionSetsPre = document.getElementById("option-sets");

        const toggleWrongAnswers = document.getElementById(
          "toggle-wrong-answers"
        );
        const toggleOptionSet = document.getElementById("toggle-option-set");
        const wrongAnswersSection = document.getElementById(
          "wrong-answers-section"
        );
        const optionSetSection = document.getElementById("option-set-section");

        function updateDropdown() {
          optionSetSelect.innerHTML =
            '<option value="">Select an option set</option>';
          for (const key in optionSets) {
            const option = document.createElement("option");
            option.value = key;
            option.textContent = key;
            optionSetSelect.appendChild(option);
          }
        }

        function displayData() {
          quizDataPre.textContent = JSON.stringify(quizData, null, 2);
          optionSetsPre.textContent = JSON.stringify(optionSets, null, 2);
        }

        toggleWrongAnswers.addEventListener("change", function () {
          if (toggleWrongAnswers.checked) {
            wrongAnswersSection.style.display = "block";
            optionSetSection.style.display = "none";
          }
        });

        toggleOptionSet.addEventListener("change", function () {
          if (toggleOptionSet.checked) {
            wrongAnswersSection.style.display = "none";
            optionSetSection.style.display = "block";
          }
        });

        questionForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const question = document.getElementById("question").value;
          const rightAnswer = document.getElementById("right-answer").value;
          const explanation = document.getElementById("explanation").value;

          if (toggleWrongAnswers.checked) {
            const wrongAnswer1 =
              document.getElementById("wrong-answer-1").value;
            const wrongAnswer2 =
              document.getElementById("wrong-answer-2").value;
            const wrongAnswer3 =
              document.getElementById("wrong-answer-3").value;

            quizData.push({
              QuestionText: question,
              rightAnswer: rightAnswer,
              wrongAnswers: [wrongAnswer1, wrongAnswer2, wrongAnswer3],
              Explanation: explanation,
            });
          } else if (toggleOptionSet.checked) {
            const optionSet = document.getElementById("option-set").value;

            if (optionSet in optionSets) {
              quizData.push({
                QuestionText: question,
                rightAnswer: rightAnswer,
                optionSet: optionSet,
                Explanation: explanation,
              });
            } else {
              alert("Invalid option set selected.");
              return;
            }
          }

          displayData();
          questionForm.reset();
          toggleWrongAnswers.checked = true;
          wrongAnswersSection.style.display = "block";
          optionSetSection.style.display = "none";
        });

        optionSetForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const optionSetName =
            document.getElementById("option-set-name").value;
          const options = document
            .getElementById("options")
            .value.split(",")
            .map((option) => option.trim());

          if (optionSetName && options.length > 0) {
            optionSets[optionSetName] = options;
            updateDropdown();
            displayData();
            optionSetForm.reset();
          } else {
            alert("Please provide a valid option set name and options.");
          }
        });

        updateDropdown();
        displayData();
      });
    </script>
  </body>
</html>
